<article>
  <h1>France Dataviz, c'est quoi ?</h1>
  <p>
    C'est juste une petite application qui te permet de visualiser ton fichier
    CSV avec les colonnes suivantes :
  </p>
  <ul>
    <li>
      <b>label</b> : Libellé qui va s'affichier quand l'utilisateur clique sur
      le rond rouge.
    </li>
    <li>
      <b>zipcode</b> : Code postal pour déterminer le lieu ou positionner le
      rond rouge.
    </li>
  </ul>

  <p>
    Alors bien sûr, c'est à toi de faire ton propre fichier CSV.
  </p>

  <p>
    Ensuite, tu dois transformer ton fichier CSV en fichier CSVP. C'est très
    simple :
  </p>
  <ul>
    <li>
      Ajoute le préfixe <code>csvp(`</code> devant le contenu du fichier CSV
    </li>
    <li>
      Ajouter le suffixe <code>`);</code> derrière le contenu du fichier CSV
    </li>
    <li>
      Renomme le fichier <code>.csv</code> en <code>.csvp</code>, c'est pas
      obligé mais ça fait plus joli.
    </li>
  </ul>

  <h2>Exemple</h2>

  <pre>
    csvp(`
    # title=Les endroits ou j'ai passé du temps en Vacances
    label,zipcode
    Mon endroit préféré,05000
    Mon autre endroit préféré,44350
    Manger des frites mayo et de la bière,B-1000
    `);
  </pre>

  <h2>Mais pourquoi ça marche pas direct avec un fichier CSV ?</h2>

  <p>
    Parce que il existe un mécanisme technique,
    <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS"
      >appelé CORS</a
    >
    qui interdit de charger un fichier CSV depuis un autre domaine web que celui
    de notre outil. Du coup, pour le contourner sans créer de faille de sécurité, on utilise la technique du
    JSONP, mais avec un fichier CSV : <b>le CSVP</b>.
  </p>

  <h1>Comment je visualise mon fichier ?</h1>

  <p>
    Tu dois déposer le fichier CSVP sur un site web, ou dans un cloud
    Google truc, Amazon machin, ou Micromou tagada, FTP, etc.). Ensuite, tu vas
    sur l'url <code>https://france-dataviz.web.app/csvp?url=TON_URL_DE_FICHIER_CSVP</code>
  </p>
  <p>
    Et voilà ! Pour t'aider, tu peux saisir l'URL de ton fichier CSVP dans le formulaire ci-dessous et je
    t'emmène à l'URL.
  </p>

  <app-form></app-form>

  <h1>Truc pour les experts</h1>

  <h2>Colonnes CSV</h2>

  <p>
    Si tu n'as pas le <i>code postal</i>, tu peux indiquer la <b>latitude</b> et
    <b>longitude</b>.
  </p>
  <p>
    En fait, voici la liste complète des champs reconnus par France Dataviz :
  </p>

  <ul>
    <li>
      <b>label</b> : Libellé qui va s'affichier quand l'utilisateur clique sur
      le rond rouge.
    </li>
    <li>
      <b>zipcode</b> : Code postal pour déterminer le lieu ou positionner le
      rond rouge.
    </li>
    <li><b>latitude</b> : (optionel) Latitude si pas de zipcode.</li>
    <li><b>longitude</b> : (optionel) Longitude si pas de zipcode.</li>
  </ul>

  <h2>Code postaux étrangers</h2>
  <p>
    Si tu indiques le zipcode (code postal), je retrouve tout seul la
    localisation. Pour les zipccodes étrangers, faut mettre le préfixe du pays
    avant. Exemple <code>B-</code> pour la Belgique, <code>CH-</code> pour la
    suisse, etc.
  </p>

  <p>Exemple</p>

  <pre>
    csvp(`
    # title=Les endroits ou j'ai passé du temps en Vacances
    label,zipcode
    Mon endroit préféré dans les Alpes Suisses,CH-1904
    Mon autre endroit préféré en Bretagne,44350
    Manger des frites mayo à Bruxelles,B-1000
    `);
  </pre>

  <h2>Commentaires</h2>

  <p>
    Le fichier CSV peut comporter des commentaires. Ce sont des lignes qui
    commencent par <code>#</code> ou par <code>@</code>.
  </p>

  <h3>Commandes</h3>

  <p>
    L'application peut reconnaitre des commandes particulières. Elles sont
    exprimées via des commentaires indiquant une ligne de commentaire comme suit
    :
  </p>

  <pre>
# nom_commande=valeur_commande
  </pre>

  <p>Exemple</p>

  <p>Le titre peut s'indiquer par une commande</p>

  <pre>
# title=Ceci est le titre du fichier
  </pre>

  <h1>Merci, 1000 fois merci !</h1>

  <ul>
    <li>
      <a href="https://firebase.google.com/">Firebase</a> pour héberger gratos
      ce service avec un super nom de domaine.
    </li>
    <li>
      <a href="https://angular.io/">Angular</a> pour le framework composant
      front end.
    </li>
    <li>
      <a href="https://d3js.org/">D3</a> pour le framework qui mets les ronds
      rouges facilement et avec des perfs.
    </li>
    <li>
      <a href="https://leafletjs.com/">Leaflet</a> pour organiser la carte en
      couche.
    </li>
    <li>
      <a href="https://www.flaticon.com/">Flaticon</a> pour les petites icônes.
    </li>
    <li>
      <a href="https://www.openstreetmap.org/">OpenStreetMap</a> pour la carte
      du monde.
    </li>
  </ul>

  <h1>Auteur</h1>
  <p>
    Jean-Louis GUENEGO
    <a href="mailto:jlguenego@gmail.com">jlguenego@gmail.com</a>
  </p>
  <p><a href="https://jlg-consulting.com">JLG Consulting @2020</a></p>
</article>
